<!DOCTYPE html>
<html lang="en">

<head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Đăng ký</title>
        <link rel="stylesheet" href="./signup.css">
</head>

<body>

        <div class="tab-form">
                <div class="tab-header">
                        <div class="active">Đăng ký khách hàng</div>
                        <div>Đăng ký tài xế</div>
                </div>
                <div class="tab-body">
                        <div class="signup active">
                                <h2>Đăng kí khách hàng</h2>
                                <div class="form-input">
                                        <label for="">Họ và Tên</label>
                                        <input type="text" placeholder="Nhập họ tên" name="fullName" id="fullName">
                                </div>
                                <div class="form-input">
                                        <label for="">Email</label>
                                        <input type="email" placeholder="Nhập email" name="email" id="email">
                                </div>
                                <div class="form-input">
                                        <label for="">Số điện thoại</label>
                                        <input type="text" placeholder="Nhập số điện thoại" name="phoneNumber"
                                                id="phoneNumber">
                                </div>
                                <div class="form-input">
                                        <label for="">Ngày sinh</label>
                                        <input type="date" placeholder="Nhập ngày sinh" name="date_of_birth"
                                                id="birthday">
                                </div>

                                <div class="form-input">
                                        <label for="">Mật khẩu</label>
                                        <input type="password" placeholder="Enter password" name="password"
                                                id="password">
                                </div>
                                <div class="form-input">
                                        <label for="">Xác nhận mật khẩu</label>
                                        <input type="password" placeholder="Xác nhận mật khẩu" name="password_cofirm"
                                                id="password_cofirm">
                                </div>
                                <div class="form-input">
                                        <button type="button" onclick="signupCustomer()">Đăng ký</button>
                                </div>
                        </div>
                        <div class="login">
                                <h2>Đăng ký tài xế</h2>
                                <div class="form-input">
                                        <label for="">Họ và Tên</label>
                                        <input type="text" placeholder="Nhập họ tên" name="fullName_driver"
                                                id="fullName_driver">
                                </div>
                                <div class="form-input">
                                        <label for="">Email</label>
                                        <input type="email" placeholder="Nhập email" name="email_driver"
                                                id="email_driver">
                                </div>
                                <div class="form-input">
                                        <label for="">Số điện thoại</label>
                                        <input type="text" placeholder="Nhập số điện thoại" name="phoneNumber_driver"
                                                id="phoneNumber_driver">
                                </div>
                                <div class="form-input">
                                        <label for="">Ngày sinh</label>
                                        <input type="date" placeholder="Nhập ngày sinh" name="date_of_birth"
                                                id="birthday_driver">
                                </div>
                                <div class="form-input">
                                        <label for="">Mật khẩu</label>
                                        <input type="password" placeholder="Nhập mật khẩu" name="password"
                                                id="password_driver">
                                </div>
                                <div class="form-input">
                                        <label for="">Xác nhận mật khẩu</label>
                                        <input type="password" placeholder="Xác nhận mật khẩu" name="password"
                                                id="password_driver_customer">
                                </div>
                                <div class="form-input">
                                        <button onclick="signupDriver()">Đăng ký</button>
                                </div>
                        </div>
                </div>
        </div>
        <script>
                let tab = document.querySelector(".tab-form");
                let tabHeader = tab.querySelector(".tab-header");
                let tabHeaderElements = tab.querySelectorAll(".tab-header > div");
                let tabBody = tab.querySelector(".tab-body");
                let tabBodyElements = tab.querySelectorAll(".tab-body > div");

                for (let i = 0; i < tabHeaderElements.length; i++) {
                        tabHeaderElements[i].addEventListener("click", function () {
                                tabHeader.querySelector(".active").classList.remove("active");
                                tabHeaderElements[i].classList.add("active");
                                tabBody.querySelector(".active").classList.remove("active");
                                tabBodyElements[i].classList.add("active");
                        });
                }
        </script>
        <script>
                function signupCustomer() {
                        // Lấy giá trị từ các trường form
                        var fullName = document.getElementById("fullName").value;
                        var email = document.getElementById("email").value;
                        var phoneNumber = document.getElementById("phoneNumber").value;
                        var password = document.getElementById("password").value;
                        var dateOfBirth = document.getElementById("birthday").value;
                        var confirmPassword = document.getElementById("password_cofirm").value;
                        var timestampInMilliseconds = Date.UTC();

                        if (fullName === '' || email === '' || phoneNumber === '' || dateOfBirth === '' || password === '') {
                                alert('Vui lòng điền đầy đủ thông tin');
                                return;
                        }

                        if (password !== confirmPassword) {
                                alert('Mật khẩu không khớp');
                                return;
                        }

                        // Kiểm tra định dạng email sử dụng Regular Expression
                        var emailFormat = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                        if (!email.match(emailFormat)) {
                                alert('Vui lòng nhập đúng định dạng email');
                                return;
                        }

                        // Thực hiện yêu cầu POST sử dụng fetch
                        fetch("https://localhost:7156/api/SignIn/customer", {
                                method: 'POST',
                                headers: {
                                        'Content-Type': 'application/json'
                                },
                                body: JSON.stringify({
                                        email: email,
                                        password: password,
                                        fullName: fullName,
                                        birthday: dateOfBirth,
                                        phoneNumber: phoneNumber,
                                        status: true,
                                        able: true,
                                        roleId: 4,
                                        dateCreatedAccount: timestampInMilliseconds,
                                })
                        })
                                .then(response => {
                                        if (!response.ok) {
                                                throw new Error('Network response was not ok');
                                        }
                                        return response.json();
                                })
                                .then(data => {
                                        // Xử lý phản hồi từ server nếu cần
                                        console.log(data);
                                        window.location.href = 'login.html';
                                        alert('Đăng ký tài khoản thành công!');
                                })
                                .catch(error => {
                                        console.error('There was a problem with the fetch operation:', error);
                                        // Xử lý lỗi nếu cần
                                });
                }
        </script>
        <script>
                function signupDriver() {
                        // Lấy giá trị từ các trường form
                        var fullName = document.getElementById("fullName_driver").value;
                        var email = document.getElementById("email_driver").value;
                        var phoneNumber = document.getElementById("phoneNumber_driver").value;
                        var password = document.getElementById("password_driver").value;
                        var dateOfBirth = document.getElementById("birthday_driver").value;
                        var confirmPassword = document.getElementById("password_driver_customer").value;
                        var timestampInMilliseconds = Date.UTC();


                        if (fullName === '' || email === '' || phoneNumber === '' || password === '') {
                                alert('Vui lòng điền đầy đủ thông tin');
                                return;
                        }

                        // Kiểm tra định dạng email sử dụng Regular Expression
                        var emailFormat = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                        if (!email.match(emailFormat)) {
                                alert('Vui lòng nhập đúng định dạng email');
                                return;
                        }

                        if (password !== confirmPassword) {
                                alert('Mật khẩu không khớp');
                                return;
                        }


                        // Thực hiện yêu cầu POST sử dụng fetch
                        fetch("https://localhost:7156/api/SignIn/driver", {
                                method: 'POST',
                                headers: {
                                        'Content-Type': 'application/json'
                                },
                                body: JSON.stringify({
                                        email: email,
                                        password: password,
                                        fullName: fullName,
                                        birthday: dateOfBirth,
                                        phoneNumber: phoneNumber,
                                        status: true,
                                        able: true,
                                        roleId: 3,
                                        dateCreatedAccount: timestampInMilliseconds,
                                })
                        })
                                .then(response => {
                                        if (!response.ok) {
                                                throw new Error('Network response was not ok');
                                        }
                                        return response.json();
                                })
                                .then(data => {
                                        // Xử lý phản hồi từ server nếu cần
                                        console.log(data);
                                        window.location.href = 'login.html';
                                        alert('Đăng ký tài khoản thành công!');
                                })
                                .catch(error => {
                                        console.error('There was a problem with the fetch operation:', error);
                                        // Xử lý lỗi nếu cần
                                });
                }
        </script>
</body>

</html>